name=pycharm
version=2025.2.1
release=1
summary="Python IDE for Professional Developers"
group="Development/Tools"
desc="PyCharm is an integrated development environment (IDE) used for Python programming.
It provides code analysis, a graphical debugger, an integrated unit tester,
integration with version control systems, and supports web development with Django."
maintainer="Maxim Slipenko <maks1ms@alt-gnome.ru>"
architectures=("amd64")
homepage="https://www.jetbrains.com/pycharm/"
license=("custom")
nonfree=1
nonfree_msg="PyCharm is proprietary software by JetBrains. Use is subject to the JetBrains User Agreement."
nonfree_msg_ru="PyCharm является проприетарным программным обеспечением JetBrains. Использование регулируется Пользовательским соглашением JetBrains."
nonfree_url='https://www.jetbrains.com/legal/docs/toolbox/user/'

provides=(
	"$name"
	"$name-professional"
	"$name-community"
)

checksums=(
	'sha256:61286adfef1bb2fc854f937fb64dfdfb7932f450a36ddafa13396918d517b363'
	'sha256:2d62753a2c77dcc268593c28fb965bed6e6e6e89f9739c54e21b01024f91a2c0'
)

_jb_name=$name
_jb_code="python/$name"

##BEGIN:jb-template##
sources=(
	local:///$_jb_name.desktop
	https://download-cdn.jetbrains.com/$_jb_code-$version.tar.gz
)

package() {
	mkdir -p "$pkgdir/opt/$_jb_name"
	cp -r "$srcdir/$_jb_name-$version/"* "$pkgdir/opt/$_jb_name"

	install -dm 755 "$pkgdir/usr/bin/"
	ln -s "/opt/$_jb_name/bin/$_jb_name" "$pkgdir/usr/bin/$_jb_name"

	install-desktop "$_jb_name.desktop"
	install -Dm644 "$pkgdir/opt/$_jb_name/bin/$_jb_name.png" "$pkgdir/usr/share/pixmaps/$_jb_name.png"
}

files() {
	files-find \
		"/opt/$_jb_name" \
		"/opt/$_jb_name/**/*" \
		"/usr/bin/$_jb_name" \
		"/usr/share/applications/$_jb_name.desktop" \
		"/usr/share/pixmaps/$_jb_name.png"
}
##END:jb-template##
